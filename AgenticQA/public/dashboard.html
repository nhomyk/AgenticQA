<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgenticQA - Dashboard</title>
    <link rel="stylesheet" href="/settings.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f7fa; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        nav { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        nav .logo { font-size: 24px; font-weight: bold; }
        nav a { color: white; text-decoration: none; margin-left: 20px; transition: opacity 0.3s; }
        nav a:hover { opacity: 0.8; }
        .dashboard-main { background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 30px; margin-top: 30px; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .dashboard-header h1 { font-size: 2rem; }
        .dashboard-actions { display: flex; gap: 10px; }
        .dashboard-section { margin-bottom: 40px; }
        .dashboard-section h2 { font-size: 1.25rem; margin-bottom: 10px; }
        .dashboard-cards { display: flex; gap: 20px; margin-bottom: 30px; }
        .dashboard-card { background: #f3f4f6; border-radius: 8px; padding: 20px; flex: 1; text-align: center; }
        .dashboard-card h3 { margin-bottom: 10px; font-size: 1rem; }
        .dashboard-card .value { font-size: 2rem; font-weight: bold; }
        .settings-link { color: #667eea; text-decoration: underline; cursor: pointer; }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">ðŸ¤– AgenticQA</div>
            <div>
                <a href="/dashboard.html">Dashboard</a>
                <a href="/settings.html">Settings</a>
                <a href="/login.html" onclick="logout()">Logout</a>
            </div>
        </nav>
    </header>
    <div class="container">
        <div class="dashboard-main">
            <div class="dashboard-header">
                <h1>AgenticQA Dashboard</h1>
                <div class="dashboard-actions">
                    <button onclick="triggerGithubAction()">Trigger GitHub Action</button>
                    <button onclick="linkGithubPAT()">Link GitHub PAT</button>
                </div>
            </div>
            <div class="dashboard-section">
                <h2>Agent Status</h2>
                <div class="dashboard-cards" id="agentStatusCards">
                    <!-- Agent status cards will be rendered here -->
                </div>
            </div>
            <div class="dashboard-section">
                <h2>Patterns Detected</h2>
                <div class="dashboard-cards" id="patternsCards">
                    <!-- Patterns cards will be rendered here -->
                </div>
            </div>
            <div class="dashboard-section">
                <h2>Data Store Statistics</h2>
                <div class="dashboard-cards" id="datastoreStatsCards">
                    <!-- Data store stats cards will be rendered here -->
                </div>
            </div>
            <div style="text-align:right;">
                <span class="settings-link" onclick="window.location.href='/settings.html'">Go to Settings &rarr;</span>
            </div>
        </div>
    </div>
    <script>
        // Placeholder: Replace with real API calls
        function renderDashboard() {
            // Agent Status
            const agents = [
                { name: 'QA', status: 'passed' },
                { name: 'Performance', status: 'warning' },
                { name: 'Compliance', status: 'failed' },
                { name: 'DevOps', status: 'unknown' }
            ];
            const agentStatusCards = document.getElementById('agentStatusCards');
            agentStatusCards.innerHTML = agents.map(agent => `
                <div class="dashboard-card">
                    <h3>${agent.name} Agent</h3>
                    <div class="value" style="color:${getStatusColor(agent.status)}">${agent.status.toUpperCase()}</div>
                </div>
            `).join('');
            // Patterns
            const patterns = [
                { label: 'Failure Patterns', value: 3 },
                { label: 'Performance Trends', value: 2 },
                { label: 'Flaky Tests', value: 1 }
            ];
            const patternsCards = document.getElementById('patternsCards');
            patternsCards.innerHTML = patterns.map(p => `
                <div class="dashboard-card">
                    <h3>${p.label}</h3>
                    <div class="value">${p.value}</div>
                </div>
            `).join('');
            // Data Store Stats
            const stats = [
                { label: 'Total Artifacts', value: 120 },
                { label: 'Storage Size', value: '24.5 MB' }
            ];
            const datastoreStatsCards = document.getElementById('datastoreStatsCards');
            datastoreStatsCards.innerHTML = stats.map(s => `
                <div class="dashboard-card">
                    <h3>${s.label}</h3>
                    <div class="value">${s.value}</div>
                </div>
            `).join('');
        }
        function getStatusColor(status) {
            switch (status) {
                case 'passed': return '#10b981';
                case 'failed': return '#ef4444';
                case 'warning': return '#f59e0b';
                default: return '#6b7280';
            }
        }
        function triggerGithubAction() {
            alert('Triggering GitHub Actions pipeline... (implement backend call)');
        }
        function linkGithubPAT() {
            const pat = prompt('Enter your GitHub Personal Access Token:');
            if (pat) {
                alert('PAT linked! (implement backend call)');
            }
        }
        function logout() {
            localStorage.removeItem('authToken');
            sessionStorage.removeItem('authToken');
            window.location.href = '/login.html';
        }
        window.addEventListener('DOMContentLoaded', renderDashboard);
    </script>
</body>
</html>
