<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgenticQA - Dashboard</title>
    <link rel="stylesheet" href="/settings.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f7fa; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        nav { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        nav .logo { font-size: 24px; font-weight: bold; }
        nav a { color: white; text-decoration: none; margin-left: 20px; transition: opacity 0.3s; }
        nav a:hover { opacity: 0.8; }
        .dashboard-main { background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 30px; margin-top: 30px; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .dashboard-header h1 { font-size: 2rem; }
        .dashboard-actions { display: flex; gap: 10px; }
        .dashboard-section { margin-bottom: 40px; }
        .dashboard-section h2 { font-size: 1.25rem; margin-bottom: 10px; }
        .dashboard-cards { display: flex; gap: 20px; margin-bottom: 30px; }
        .dashboard-card { background: #f3f4f6; border-radius: 8px; padding: 20px; flex: 1; text-align: center; }
        .dashboard-card h3 { margin-bottom: 10px; font-size: 1rem; }
        .dashboard-card .value { font-size: 2rem; font-weight: bold; }
        .settings-link { color: #667eea; text-decoration: underline; cursor: pointer; }

        /* Pipeline Steps Visualization */
        .pipeline-container { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; padding: 30px; margin-bottom: 30px; }
        .pipeline-container h2 { color: white; margin-bottom: 20px; font-size: 1.5rem; }
        .pipeline-steps { display: flex; gap: 15px; overflow-x: auto; padding: 10px 0; }
        .pipeline-step { background: rgba(255,255,255,0.95); border-radius: 8px; padding: 20px; min-width: 200px; flex: 0 0 auto; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: transform 0.3s, box-shadow 0.3s; position: relative; }
        .pipeline-step:hover { transform: translateY(-5px); box-shadow: 0 6px 20px rgba(0,0,0,0.25); }
        .pipeline-step::after { content: '‚Üí'; position: absolute; right: -25px; top: 50%; transform: translateY(-50%); font-size: 24px; color: white; font-weight: bold; }
        .pipeline-step:last-child::after { content: ''; }
        .pipeline-step-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .pipeline-step-icon { font-size: 24px; }
        .pipeline-step-title { font-weight: bold; font-size: 14px; color: #333; }
        .pipeline-step-status { font-size: 12px; color: #666; margin-top: 5px; }
        .status-badge { display: inline-block; padding: 3px 8px; border-radius: 12px; font-size: 11px; font-weight: 600; }
        .status-running { background: #ffc107; color: #333; }
        .status-success { background: #28a745; color: white; }
        .status-failed { background: #dc3545; color: white; }
        .status-pending { background: #6c757d; color: white; }

        /* Agent Interaction Section */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .agent-card { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; padding: 20px; transition: all 0.3s; cursor: pointer; }
        .agent-card:hover { border-color: #667eea; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2); transform: translateY(-3px); }
        .agent-card.active { border-color: #667eea; background: #f0f4ff; }
        .agent-card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .agent-icon { font-size: 32px; }
        .agent-name { font-weight: bold; font-size: 16px; color: #333; }
        .agent-description { font-size: 13px; color: #666; margin-bottom: 12px; }
        .agent-status-indicator { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 6px; }
        .agent-status-indicator.active { background: #28a745; }
        .agent-status-indicator.inactive { background: #6c757d; }
        .agent-interact-btn { width: 100%; padding: 8px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: background 0.3s; }
        .agent-interact-btn:hover { background: #5568d3; }

        /* Drag Drop Upload Section */
        .upload-container { background: #f8f9fa; border: 2px dashed #ddd; border-radius: 8px; padding: 40px; text-align: center; transition: all 0.3s; margin-top: 20px; }
        .upload-container.drag-over { border-color: #667eea; background: #f0f4ff; }
        .upload-icon { font-size: 48px; margin-bottom: 15px; color: #667eea; }
        .upload-text { font-size: 16px; color: #333; margin-bottom: 10px; }
        .upload-subtext { font-size: 13px; color: #999; margin-bottom: 20px; }
        .upload-btn { display: inline-block; padding: 12px 24px; background: #667eea; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; transition: background 0.3s; }
        .upload-btn:hover { background: #5568d3; }
        .uploaded-files { margin-top: 20px; text-align: left; }
        .uploaded-file-item { background: white; border: 1px solid #e9ecef; border-radius: 6px; padding: 12px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .file-info { display: flex; align-items: center; gap: 10px; }
        .file-icon { font-size: 20px; }
        .file-name { font-weight: 600; font-size: 14px; color: #333; }
        .file-size { font-size: 12px; color: #999; }
        .file-remove { color: #dc3545; cursor: pointer; font-weight: bold; padding: 4px 8px; }

        /* Feature Request Section */
        .feature-request-form { background: #f8f9fa; border-radius: 8px; padding: 25px; margin-top: 20px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 14px; color: #333; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-family: inherit; font-size: 14px; }
        .form-group textarea { min-height: 120px; resize: vertical; }
        .form-group select { cursor: pointer; }
        .submit-btn { background: #667eea; color: white; padding: 12px 32px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 14px; transition: background 0.3s; }
        .submit-btn:hover { background: #5568d3; }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">ü§ñ AgenticQA</div>
            <div>
                <a href="/dashboard.html">Dashboard</a>
                <a href="/settings.html">Settings</a>
                <a href="/login.html" onclick="logout()">Logout</a>
            </div>
        </nav>
    </header>
    <div class="container">
        <div class="dashboard-main">
            <div class="dashboard-header">
                <h1>AgenticQA Dashboard</h1>
                <div class="dashboard-actions">
                    <button onclick="triggerGithubAction()">Trigger GitHub Action</button>
                    <button onclick="linkGithubPAT()">Link GitHub PAT</button>
                </div>
            </div>

            <!-- GitHub Pipeline Steps Visualization -->
            <div class="pipeline-container">
                <h2>üîÑ CI/CD Pipeline Flow</h2>
                <div class="pipeline-steps" id="pipelineSteps">
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">üîç</div>
                            <div class="pipeline-step-title">Validate Workflows</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-success">‚úì Passed</span>
                        </div>
                    </div>
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">üè•</div>
                            <div class="pipeline-step-title">Pipeline Health</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-success">‚úì Passed</span>
                        </div>
                    </div>
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">üîß</div>
                            <div class="pipeline-step-title">Auto-Fix Linting</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-running">‚ü≥ Running</span>
                        </div>
                    </div>
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">‚úÖ</div>
                            <div class="pipeline-step-title">Code Linting</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-pending">‚è∏ Pending</span>
                        </div>
                    </div>
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">üß™</div>
                            <div class="pipeline-step-title">Test Suite</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-pending">‚è∏ Pending</span>
                        </div>
                    </div>
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">ü§ñ</div>
                            <div class="pipeline-step-title">RAG Tests</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-pending">‚è∏ Pending</span>
                        </div>
                    </div>
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">üóÑÔ∏è</div>
                            <div class="pipeline-step-title">Weaviate Integration</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-pending">‚è∏ Pending</span>
                        </div>
                    </div>
                    <div class="pipeline-step">
                        <div class="pipeline-step-header">
                            <div class="pipeline-step-icon">üìä</div>
                            <div class="pipeline-step-title">Data Validation</div>
                        </div>
                        <div class="pipeline-step-status">
                            <span class="status-badge status-pending">‚è∏ Pending</span>
                        </div>
                    </div>
                </div>
                <div style="text-align: right; margin-top: 15px;">
                    <button onclick="refreshPipelineStatus()" style="background: rgba(255,255,255,0.9); color: #667eea; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600;">üîÑ Refresh Status</button>
                </div>
            </div>

            <!-- Langgraph Agent Interaction -->
            <div class="dashboard-section">
                <h2>ü§ñ Langgraph Agents</h2>
                <p style="color: #666; margin-bottom: 15px;">Interact with the intelligent agents embedded in the pipeline</p>
                <div class="agent-grid">
                    <div class="agent-card" onclick="selectAgent('qa')">
                        <div class="agent-card-header">
                            <div class="agent-icon">üß™</div>
                            <div>
                                <div class="agent-name">QA Assistant</div>
                                <div style="font-size: 12px; color: #999;">
                                    <span class="agent-status-indicator active"></span>Active
                                </div>
                            </div>
                        </div>
                        <div class="agent-description">Analyzes test results, finds patterns, and suggests improvements</div>
                        <button class="agent-interact-btn" onclick="event.stopPropagation(); interactWithAgent('qa')">Interact</button>
                    </div>
                    <div class="agent-card" onclick="selectAgent('performance')">
                        <div class="agent-card-header">
                            <div class="agent-icon">‚ö°</div>
                            <div>
                                <div class="agent-name">Performance Agent</div>
                                <div style="font-size: 12px; color: #999;">
                                    <span class="agent-status-indicator active"></span>Active
                                </div>
                            </div>
                        </div>
                        <div class="agent-description">Tracks latency, detects degradation, and recommends optimizations</div>
                        <button class="agent-interact-btn" onclick="event.stopPropagation(); interactWithAgent('performance')">Interact</button>
                    </div>
                    <div class="agent-card" onclick="selectAgent('compliance')">
                        <div class="agent-card-header">
                            <div class="agent-icon">üõ°Ô∏è</div>
                            <div>
                                <div class="agent-name">Compliance Agent</div>
                                <div style="font-size: 12px; color: #999;">
                                    <span class="agent-status-indicator active"></span>Active
                                </div>
                            </div>
                        </div>
                        <div class="agent-description">Validates SOC2, GDPR, HIPAA requirements and security practices</div>
                        <button class="agent-interact-btn" onclick="event.stopPropagation(); interactWithAgent('compliance')">Interact</button>
                    </div>
                    <div class="agent-card" onclick="selectAgent('devops')">
                        <div class="agent-card-header">
                            <div class="agent-icon">üöÄ</div>
                            <div>
                                <div class="agent-name">DevOps Agent</div>
                                <div style="font-size: 12px; color: #999;">
                                    <span class="agent-status-indicator active"></span>Active
                                </div>
                            </div>
                        </div>
                        <div class="agent-description">Pre-deployment validation, rollback mechanisms, and issue prediction</div>
                        <button class="agent-interact-btn" onclick="event.stopPropagation(); interactWithAgent('devops')">Interact</button>
                    </div>
                </div>
            </div>

            <!-- Upload/Drag Drop Knowledge Section -->
            <div class="dashboard-section">
                <h2>üì§ Upload Knowledge & Capabilities</h2>
                <p style="color: #666; margin-bottom: 15px;">Drag and drop files to enhance agent knowledge base</p>
                <div class="upload-container" id="uploadContainer">
                    <div class="upload-icon">üìÅ</div>
                    <div class="upload-text">Drag & Drop files here</div>
                    <div class="upload-subtext">or click to browse</div>
                    <label class="upload-btn">
                        <input type="file" id="fileInput" multiple style="display: none;" onchange="handleFileUpload(event)">
                        Choose Files
                    </label>
                    <div class="upload-subtext" style="margin-top: 15px;">Supported: .json, .txt, .csv, .md, .yaml</div>
                </div>
                <div class="uploaded-files" id="uploadedFiles"></div>
            </div>

            <!-- Feature Request Section -->
            <div class="dashboard-section">
                <h2>üí° Feature Requests</h2>
                <p style="color: #666; margin-bottom: 15px;">Suggest new features or improvements for AgenticQA</p>
                <div class="feature-request-form">
                    <div class="form-group">
                        <label for="featureTitle">Feature Title</label>
                        <input type="text" id="featureTitle" placeholder="Brief title for your feature request">
                    </div>
                    <div class="form-group">
                        <label for="featureCategory">Category</label>
                        <select id="featureCategory">
                            <option value="agent">Agent Enhancement</option>
                            <option value="pipeline">Pipeline Improvement</option>
                            <option value="rag">RAG/ML Feature</option>
                            <option value="ui">UI/UX</option>
                            <option value="integration">Integration</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="featureDescription">Description</label>
                        <textarea id="featureDescription" placeholder="Describe your feature request in detail..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="featurePriority">Priority</label>
                        <select id="featurePriority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                            <option value="critical">Critical</option>
                        </select>
                    </div>
                    <button class="submit-btn" onclick="submitFeatureRequest()">Submit Feature Request</button>
                </div>
            </div>

            <div class="dashboard-section">
                <h2>Scan a Website</h2>
                <div class="input-group">
                    <input type="url" id="urlInput" placeholder="Enter website URL (e.g., https://example.com)" />
                    <button id="scanBtn">Scan</button>
                </div>
            </div>
            <div class="dashboard-section">
                <h2>Scan Results</h2>
                <div class="result-box">
                    <h3>üî¥ Issues Found</h3>
                    <textarea id="results" readonly placeholder="Scan results will appear here"></textarea>
                    <div class="button-group">
                        <button onclick="downloadFromElement('results', 'scan-results.txt')">üì• Download</button>
                        <button onclick="copyToClipboard('results')">üìã Copy</button>
                    </div>
                </div>
                <div class="result-box">
                    <h3>üõ†Ô∏è Technologies Detected</h3>
                    <textarea id="technologies" readonly placeholder="Technologies will appear here"></textarea>
                    <div class="button-group">
                        <button onclick="downloadFromElement('technologies', 'technologies.txt')">üì• Download</button>
                        <button onclick="copyToClipboard('technologies')">üìã Copy</button>
                    </div>
                </div>
                <div class="result-box">
                    <h3>üß™ Generated Test Cases</h3>
                    <textarea id="testcases" readonly placeholder="Test cases will appear here"></textarea>
                    <div class="button-group">
                        <button onclick="downloadFromElement('testcases', 'testcases.txt')">üì• Download</button>
                        <button onclick="copyToClipboard('testcases')">üìã Copy</button>
                    </div>
                </div>
                <div class="result-box">
                    <h3>‚ö° Performance Metrics</h3>
                    <textarea id="performance" readonly placeholder="Performance data will appear here"></textarea>
                    <div class="button-group">
                        <button onclick="downloadFromElement('performance', 'performance-metrics.txt')">üì• Download</button>
                        <button onclick="copyToClipboard('performance')">üìã Copy</button>
                    </div>
                </div>
                <div class="result-box">
                    <h3>üîå APIs Detected</h3>
                    <textarea id="apis" readonly placeholder="API calls will appear here"></textarea>
                    <div class="button-group">
                        <button onclick="downloadFromElement('apis', 'apis-used.txt')">üì• Download</button>
                        <button onclick="copyToClipboard('apis')">üìã Copy</button>
                    </div>
                </div>
                <div class="result-box">
                    <h3>üí° AI-Powered Recommendations</h3>
                    <textarea id="recommendations" readonly placeholder="Recommendations will appear here"></textarea>
                    <div class="button-group">
                        <button onclick="downloadFromElement('recommendations', 'recommendations.txt')">üì• Download</button>
                        <button onclick="copyToClipboard('recommendations')">üìã Copy</button>
                    </div>
                </div>
                <div class="result-box" style="margin-top: 2rem;">
                    <h3>üß™ Test Framework Scripts</h3>
                    <div class="scanner-tabs">
                        <button class="tab-button active" data-tab="playwright" onclick="switchTestTab(event, 'playwright')">‚ñ∂ Playwright</button>
                        <button class="tab-button" data-tab="cypress" onclick="switchTestTab(event, 'cypress')">üå≥ Cypress</button>
                        <button class="tab-button" data-tab="vitest" onclick="switchTestTab(event, 'vitest')">‚ö° Vitest</button>
                    </div>
                    <div id="playwright" class="tab-pane active">
                        <textarea id="playwright-content" readonly placeholder="Playwright test cases will appear here"></textarea>
                    </div>
                    <div id="cypress" class="tab-pane">
                        <textarea id="cypress-content" readonly placeholder="Cypress test cases will appear here"></textarea>
                    </div>
                    <div id="vitest" class="tab-pane">
                        <textarea id="vitest-content" readonly placeholder="Vitest test cases will appear here"></textarea>
                    </div>
                </div>
            </div>
            <div style="text-align:right;">
                <span class="settings-link" onclick="window.location.href='/settings.html'">Go to Settings &rarr;</span>
            </div>
        </div>
    </div>
    <script>
        // Pipeline Status Management
        function refreshPipelineStatus() {
            console.log('Refreshing pipeline status...');
            // Fetch latest pipeline status from GitHub Actions
            fetch('/api/pipeline-status')
                .then(r => r.json())
                .then(data => {
                    updatePipelineSteps(data);
                    alert('Pipeline status refreshed!');
                })
                .catch(e => {
                    console.error('Failed to refresh pipeline:', e);
                    // Simulate status update for demo
                    simulatePipelineUpdate();
                });
        }

        function updatePipelineSteps(data) {
            // Update pipeline steps based on real data
            console.log('Pipeline data:', data);
        }

        function simulatePipelineUpdate() {
            const steps = document.querySelectorAll('.pipeline-step');
            steps.forEach((step, idx) => {
                const badge = step.querySelector('.status-badge');
                if (Math.random() > 0.3) {
                    badge.className = 'status-badge status-success';
                    badge.textContent = '‚úì Passed';
                }
            });
        }

        // Agent Interaction
        let selectedAgent = null;

        function selectAgent(agentName) {
            selectedAgent = agentName;
            document.querySelectorAll('.agent-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        function interactWithAgent(agentName) {
            console.log('Interacting with agent:', agentName);
            const agentNames = {
                'qa': 'QA Assistant',
                'performance': 'Performance Agent',
                'compliance': 'Compliance Agent',
                'devops': 'DevOps Agent'
            };
            const message = prompt(`Send a message to ${agentNames[agentName]}:`);
            if (message) {
                alert(`Message sent to ${agentNames[agentName]}!\n\nAgent will process your request and respond via the pipeline.`);
                // In production, this would send to the agent via API
                fetch('/api/agent-interact', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({agent: agentName, message: message})
                }).catch(e => console.log('Agent interaction queued'));
            }
        }

        function triggerGithubAction() {
            console.log('Triggering GitHub Action...');
            alert('GitHub Action triggered! Check the pipeline status above for updates.');
        }

        function linkGithubPAT() {
            window.location.href = '/settings.html';
        }

        // File Upload with Drag & Drop
        const uploadContainer = document.getElementById('uploadContainer');
        const fileInput = document.getElementById('fileInput');
        const uploadedFilesDiv = document.getElementById('uploadedFiles');

        uploadContainer.addEventListener('click', () => {
            fileInput.click();
        });

        uploadContainer.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadContainer.classList.add('drag-over');
        });

        uploadContainer.addEventListener('dragleave', () => {
            uploadContainer.classList.remove('drag-over');
        });

        uploadContainer.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadContainer.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            handleFiles(files);
        });

        function handleFileUpload(event) {
            const files = event.target.files;
            handleFiles(files);
        }

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'uploaded-file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon">üìÑ</div>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${formatFileSize(file.size)}</div>
                        </div>
                    </div>
                    <div class="file-remove" onclick="removeFile(this)">‚úï</div>
                `;
                uploadedFilesDiv.appendChild(fileItem);
            });

            // Simulate upload to agent knowledge base
            console.log('Uploading files to agent knowledge base...');
            setTimeout(() => {
                alert(`${files.length} file(s) uploaded successfully to agent knowledge base!`);
            }, 500);
        }

        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / 1048576).toFixed(1) + ' MB';
        }

        function removeFile(element) {
            element.parentElement.remove();
        }

        // Feature Request Submission
        function submitFeatureRequest() {
            const title = document.getElementById('featureTitle').value;
            const category = document.getElementById('featureCategory').value;
            const description = document.getElementById('featureDescription').value;
            const priority = document.getElementById('featurePriority').value;

            if (!title || !description) {
                alert('Please fill in both title and description');
                return;
            }

            const request = {
                title,
                category,
                description,
                priority,
                timestamp: new Date().toISOString()
            };

            console.log('Feature request:', request);

            // In production, send to backend API
            fetch('/api/feature-request', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(request)
            })
            .then(() => {
                alert('Feature request submitted successfully! Thank you for your feedback.');
                document.getElementById('featureTitle').value = '';
                document.getElementById('featureDescription').value = '';
            })
            .catch(e => {
                console.log('Feature request queued locally');
                alert('Feature request submitted successfully! Thank you for your feedback.');
                document.getElementById('featureTitle').value = '';
                document.getElementById('featureDescription').value = '';
            });
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            // Auto-refresh pipeline status every 30 seconds
            setInterval(() => {
                fetch('/api/pipeline-status')
                    .then(r => r.json())
                    .then(data => updatePipelineSteps(data))
                    .catch(e => console.log('Pipeline status check...'));
            }, 30000);
        });
    </script>
    <script src="/app.js"></script>
</body>
</html>
